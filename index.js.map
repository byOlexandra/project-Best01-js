{"version":3,"file":"index.js","sources":["../src/js/FAQ-section.js","../src/js/order-modal.js","../src/main.js"],"sourcesContent":["import Accordion from \"accordion-js\";\nimport \"accordion-js/dist/accordion.min.css\";\n\nexport function initAccordion() {\n    document.addEventListener(\"DOMContentLoaded\", () => {\n        new Accordion(\".accordion-container\", {\n        duration: 800,\n        showMultiple: false\n        });\n    });\n}","import Swal from \"sweetalert2\";\n\nconst refs = {\n    modal: document.querySelector(\"[data-modal]\"),\n    backdrop: document.querySelector(\"[data-modal-backdrop]\"),\n    closeBtn: document.querySelector(\"[data-modal-close]\"),\n    form: document.querySelector(\".order-modal-form\"),\n};\n\nconst BASE_URL = \"https://paw-hut.b.goit.study/api\";\nlet currentAnimalId = null;\n\nconst hasModal = refs.modal && refs.backdrop && refs.closeBtn && refs.form;\n\nif (hasModal) {\n    refs.closeBtn.addEventListener(\"click\", closeModal);\n    refs.backdrop.addEventListener(\"click\", onBackdropClick);\n    refs.form.addEventListener(\"submit\", onSubmit);\n    refs.form.addEventListener(\"input\", onFieldInput);\n    refs.form.addEventListener(\"blur\", onFieldBlur, true);\n}\n\ndocument.addEventListener(\"openAdoptionModal\", e => {\n    if (!hasModal) return;\n    const { animalId } = e.detail || {};\n    openModal(animalId);\n});\n\nfunction openModal(animalId) {\n    if (!hasModal) return;\n    currentAnimalId = animalId ?? null;\n    refs.modal.classList.remove(\"is-hidden\");\n    document.body.classList.add(\"no-scroll\");\n    window.addEventListener(\"keydown\", onEscClose);\n}\n\nfunction closeModal() {\n    if (!hasModal) return;\n    refs.modal.classList.add(\"is-hidden\");\n    document.body.classList.remove(\"no-scroll\");\n    window.removeEventListener(\"keydown\", onEscClose);\n    currentAnimalId = null;\n    clearAllErrors();\n}\n\nfunction onEscClose(e) {\n    if (e.key === \"Escape\") closeModal();\n}\n\nfunction onBackdropClick(e) {\n    if (e.target === refs.backdrop) closeModal();\n}\n\nfunction ensureErrorEl(field) {\n    const wrapper = field.closest(\".order-modal-field\");\n    if (!wrapper) return null;\n\n    let errorEl = wrapper.querySelector(\".order-modal-error\");\n    if (!errorEl) {\n        errorEl = document.createElement(\"p\");\n        errorEl.className = \"order-modal-error\";\n        errorEl.style.marginTop = \"4px\";\n        errorEl.style.fontSize = \"12px\";\n        errorEl.style.lineHeight = \"1.3\";\n        errorEl.style.color = \"#e74c3c\";\n\n        wrapper.appendChild(errorEl);\n    }\n\n    return errorEl;\n}\n\nfunction setError(field, message) {\n    field.classList.add(\"is-error\");\n    const errorEl = ensureErrorEl(field);\n    if (errorEl) errorEl.textContent = message;\n}\n\nfunction clearError(field) {\n    field.classList.remove(\"is-error\");\n    const wrapper = field.closest(\".order-modal-field\");\n    if (!wrapper) return;\n\n    const errorEl = wrapper.querySelector(\".order-modal-error\");\n    if (errorEl) errorEl.textContent = \"\";\n}\n\nfunction clearAllErrors() {\n    if (!refs.form) return;\n    const fields = refs.form.querySelectorAll(\n        \".order-modal-input, .order-modal-textarea\"\n    );\n    fields.forEach(clearError);\n}\n\nfunction validateField(field) {\n    if (!field) return true;\n\n    clearError(field);\n\n    if (field.id === \"user-comment\") {\n    const value = field.value.trim();\n    if (value.length > 0 && value.length < 10) {\n        setError(\n            field,\n            `Ð£ Ñ‚ÐµÐºÑÑ‚Ñ– Ð¼Ð°Ñ” Ð±ÑƒÑ‚Ð¸ Ð½Ðµ Ð¼ÐµÐ½ÑˆÐµ 10 ÑÐ¸Ð¼Ð²Ð¾Ð»Ñ–Ð² (Ð²Ð¸ Ð²Ð²ÐµÐ»Ð¸ ${value.length}).`\n        );\n        return false;\n    }\n    return true;\n    }\n\n    if (!field.checkValidity()) {\n    if (field.id === \"user-name\") {\n        setError(field, \"Ð’ÐºÐ°Ð¶Ñ–Ñ‚ÑŒ Ñ–Ð¼Ê¼Ñ.\");\n        return false;\n    }\n\n    if (field.id === \"user-phone\") {\n        setError(field, \"Ð’Ð²ÐµÐ´Ñ–Ñ‚ÑŒ Ð½Ð¾Ð¼ÐµÑ€ Ñƒ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ñ– 380XXXXXXXXX (12 Ñ†Ð¸Ñ„Ñ€).\");\n        return false;\n    }\n\n    setError(field, \"ÐŸÐµÑ€ÐµÐ²Ñ–Ñ€Ñ‚Ðµ Ð²Ð²ÐµÐ´ÐµÐ½Ñ– Ð´Ð°Ð½Ñ–.\");\n    return false;\n    }\n\n    return true;\n}\n\nfunction validateForm() {\n    const nameField = refs.form.querySelector(\"#user-name\");\n    const phoneField = refs.form.querySelector(\"#user-phone\");\n    const commentField = refs.form.querySelector(\"#user-comment\");\n\n    const a = validateField(nameField);\n    const b = validateField(phoneField);\n    const c = validateField(commentField);\n\n    return a && b && c;\n}\n\nfunction onFieldInput(e) {\n    const field = e.target;\n    if (\n        field.classList.contains(\"order-modal-input\") ||\n        field.classList.contains(\"order-modal-textarea\")\n    ) {\n        validateField(field);\n    }\n}\n\nfunction onFieldBlur(e) {\n    const field = e.target;\n    if (\n        field.classList.contains(\"order-modal-input\") ||\n        field.classList.contains(\"order-modal-textarea\")\n    ) {\n        validateField(field);\n    }\n}\n\nasync function onSubmit(e) {\n    e.preventDefault();\n\n    if (!currentAnimalId) {\n        Swal.fire({\n        icon: \"warning\",\n        title: \"ÐÐµ Ð¾Ð±Ñ€Ð°Ð½Ð¾ Ñ‚Ð²Ð°Ñ€Ð¸Ð½Ñƒ\",\n        text: \"Ð’Ñ–Ð´ÐºÑ€Ð¸Ð¹ Ð´ÐµÑ‚Ð°Ð»Ñ– Ñ‚Ð²Ð°Ñ€Ð¸Ð½Ð¸ Ñ‚Ð° Ð½Ð°Ñ‚Ð¸ÑÐ½Ð¸ Â«Ð’Ð·ÑÑ‚Ð¸ Ð´Ð¾Ð´Ð¾Ð¼ÑƒÂ».\",\n        });\n        return;\n    }\n\n    const isValid = validateForm();\n    if (!isValid) {\n        const firstError = refs.form.querySelector(\".is-error\");\n        if (firstError) firstError.focus();\n        return;\n    }\n\n    const fd = new FormData(refs.form);\n\n    const payload = {\n        name: fd.get(\"user-name\").trim(),\n        phone: fd.get(\"user-phone\").trim(),\n        animalId: currentAnimalId,\n        comment: (fd.get(\"user-comment\") || \"\").trim(),\n    };\n\n    const submitBtn = refs.form.querySelector('button[type=\"submit\"]');\n    if (submitBtn) submitBtn.disabled = true;\n\n    try {\n        const res = await fetch(`${BASE_URL}/orders`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(payload),\n        });\n\n    if (!res.ok) {\n        let message = \"Ð¡Ñ‚Ð°Ð»Ð°ÑÑ Ð¿Ð¾Ð¼Ð¸Ð»ÐºÐ°. Ð¡Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ñ‰Ðµ Ñ€Ð°Ð·.\";\n        try {\n            const errData = await res.json();\n            message = errData.message || message;\n        } catch (_) {}\n        throw new Error(message);\n    }\n\n    await Swal.fire({\n        icon: \"success\",\n        title: \"Ð—Ð°ÑÐ²ÐºÑƒ Ð½Ð°Ð´Ñ–ÑÐ»Ð°Ð½Ð¾!\",\n        text: \"ÐœÐ¸ Ð·Ð²â€™ÑÐ¶ÐµÐ¼Ð¾ÑÑ Ð· Ð²Ð°Ð¼Ð¸ Ð½Ð°Ð¹Ð±Ð»Ð¸Ð¶Ñ‡Ð¸Ð¼ Ñ‡Ð°ÑÐ¾Ð¼ ðŸ™‚\",\n        timer: 2200,\n        showConfirmButton: false,\n    });\n\n    refs.form.reset();\n    closeModal();\n    } catch (err) {\n        Swal.fire({\n        icon: \"error\",\n        title: \"ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð½Ð°Ð´Ñ–ÑÐ»Ð°Ñ‚Ð¸ Ð·Ð°ÑÐ²ÐºÑƒ\",\n        text: err.message || \"ÐŸÐµÑ€ÐµÐ²Ñ–Ñ€ Ð·â€™Ñ”Ð´Ð½Ð°Ð½Ð½Ñ Ñ‚Ð° ÑÐ¿Ñ€Ð¾Ð±ÑƒÐ¹ Ñ‰Ðµ Ñ€Ð°Ð·.\",\n        });\n    } finally {\n        if (submitBtn) submitBtn.disabled = false;\n    }\n}\n\nexport { openModal, closeModal };\n\n\n\n","import { initAccordion } from './js/FAQ-section.js';\ninitAccordion();\n\nimport { openModal, closeModal } from './js/order-modal.js';\nopenModal();\ncloseModal();\n"],"names":["initAccordion","Accordion","refs","BASE_URL","currentAnimalId","hasModal","closeModal","onBackdropClick","onSubmit","onFieldInput","onFieldBlur","animalId","openModal","onEscClose","clearAllErrors","ensureErrorEl","field","wrapper","errorEl","setError","message","clearError","validateField","value","validateForm","nameField","phoneField","commentField","a","b","c","Swal","firstError","fd","payload","submitBtn","res","err"],"mappings":"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"}