import{A as D,S as w,a as S,N as x,P as $,b as N}from"./assets/vendor-laJMfscR.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();function R(){document.addEventListener("DOMContentLoaded",()=>{new D(".accordion-container",{duration:800,showMultiple:!1})})}const s={modal:document.querySelector("[data-modal]"),backdrop:document.querySelector("[data-modal-backdrop]"),closeBtn:document.querySelector("[data-modal-close]"),form:document.querySelector(".order-modal-form")},X="https://paw-hut.b.goit.study/api";let p=null;const h=s.modal&&s.backdrop&&s.closeBtn&&s.form;h&&(s.closeBtn.addEventListener("click",u),s.backdrop.addEventListener("click",_),s.form.addEventListener("submit",J),s.form.addEventListener("input",z),s.form.addEventListener("blur",W,!0));document.addEventListener("openAdoptionModal",e=>{if(!h)return;const{animalId:t}=e.detail||{};P(t)});function P(e){h&&(p=e??null,s.modal.classList.remove("is-hidden"),document.body.classList.add("no-scroll"),window.addEventListener("keydown",C))}function u(){h&&(s.modal.classList.add("is-hidden"),document.body.classList.remove("no-scroll"),window.removeEventListener("keydown",C),p=null,H())}function C(e){e.key==="Escape"&&u()}function _(e){e.target===s.backdrop&&u()}function V(e){const t=e.closest(".order-modal-field");if(!t)return null;let o=t.querySelector(".order-modal-error");return o||(o=document.createElement("p"),o.className="order-modal-error",o.style.marginTop="4px",o.style.fontSize="12px",o.style.lineHeight="1.3",o.style.color="#e74c3c",t.appendChild(o)),o}function m(e,t){e.classList.add("is-error");const o=V(e);o&&(o.textContent=t)}function B(e){e.classList.remove("is-error");const t=e.closest(".order-modal-field");if(!t)return;const o=t.querySelector(".order-modal-error");o&&(o.textContent="")}function H(){if(!s.form)return;s.form.querySelectorAll(".order-modal-input, .order-modal-textarea").forEach(B)}function d(e){if(!e)return!0;if(B(e),e.id==="user-comment"){const t=e.value.trim();return t.length>0&&t.length<10?(m(e,`–£ —Ç–µ–∫—Å—Ç—ñ –º–∞—î –±—É—Ç–∏ –Ω–µ –º–µ–Ω—à–µ 10 —Å–∏–º–≤–æ–ª—ñ–≤ (–≤–∏ –≤–≤–µ–ª–∏ ${t.length}).`),!1):!0}return e.checkValidity()?!0:e.id==="user-name"?(m(e,"–í–∫–∞–∂—ñ—Ç—å —ñ–º º—è."),!1):e.id==="user-phone"?(m(e,"–í–≤–µ–¥—ñ—Ç—å –Ω–æ–º–µ—Ä —É —Ñ–æ—Ä–º–∞—Ç—ñ 380XXXXXXXXX (12 —Ü–∏—Ñ—Ä)."),!1):(m(e,"–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤–≤–µ–¥–µ–Ω—ñ –¥–∞–Ω—ñ."),!1)}function U(){const e=s.form.querySelector("#user-name"),t=s.form.querySelector("#user-phone"),o=s.form.querySelector("#user-comment"),a=d(e),n=d(t),r=d(o);return a&&n&&r}function z(e){const t=e.target;(t.classList.contains("order-modal-input")||t.classList.contains("order-modal-textarea"))&&d(t)}function W(e){const t=e.target;(t.classList.contains("order-modal-input")||t.classList.contains("order-modal-textarea"))&&d(t)}async function J(e){if(e.preventDefault(),!p){w.fire({icon:"warning",title:"–ù–µ –æ–±—Ä–∞–Ω–æ —Ç–≤–∞—Ä–∏–Ω—É",text:"–í—ñ–¥–∫—Ä–∏–π –¥–µ—Ç–∞–ª—ñ —Ç–≤–∞—Ä–∏–Ω–∏ —Ç–∞ –Ω–∞—Ç–∏—Å–Ω–∏ ¬´–í–∑—è—Ç–∏ –¥–æ–¥–æ–º—É¬ª."});return}if(!U()){const r=s.form.querySelector(".is-error");r&&r.focus();return}const o=new FormData(s.form),a={name:o.get("user-name").trim(),phone:o.get("user-phone").trim(),animalId:p,comment:(o.get("user-comment")||"").trim()},n=s.form.querySelector('button[type="submit"]');n&&(n.disabled=!0);try{const r=await fetch(`${X}/orders`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok){let i="–°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.";try{i=(await r.json()).message||i}catch{}throw new Error(i)}await w.fire({icon:"success",title:"–ó–∞—è–≤–∫—É –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ!",text:"–ú–∏ –∑–≤‚Äô—è–∂–µ–º–æ—Å—è –∑ –≤–∞–º–∏ –Ω–∞–π–±–ª–∏–∂—á–∏–º —á–∞—Å–æ–º üôÇ",timer:2200,showConfirmButton:!1}),s.form.reset(),u()}catch(r){w.fire({icon:"error",title:"–ù–µ –≤–¥–∞–ª–æ—Å—è –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ –∑–∞—è–≤–∫—É",text:r.message||"–ü–µ—Ä–µ–≤—ñ—Ä –∑‚Äô—î–¥–Ω–∞–Ω–Ω—è —Ç–∞ —Å–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑."})}finally{n&&(n.disabled=!1)}}function K(){const e=document.querySelector("[data-menu-open]"),t=document.querySelector("[data-menu-close]"),o=document.querySelector("[data-menu]"),a=document.querySelectorAll(".header-wrapper a");if(!e||!t||!o)return;const n=()=>{o.classList.add("is-open"),document.body.style.overflow="hidden"},r=()=>{o.classList.remove("is-open"),document.body.style.overflow=""};e.addEventListener("click",n),t.addEventListener("click",r),window.addEventListener("keydown",i=>{i.key==="Escape"&&o.classList.contains("is-open")&&r()}),a.forEach(i=>{i.addEventListener("click",r)}),o.addEventListener("click",i=>{i.target===o&&r()})}S.use([x,$]);function G(){const e=document.querySelector(".swiper");e&&(document.querySelector(".swiper-button-prev"),document.querySelector(".swiper-button-next"),new S(e,{slidesPerView:1,loop:!1,speed:600,grabCursor:!0,allowTouchMove:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev",disabledClass:"swiper-button-disabled"},pagination:{el:".swiper-pagination",clickable:!0,dynamicBullets:!0,dynamicMainBullets:1}}))}const l=document.querySelector("[data-animal-modal-backdrop]");document.querySelector("[data-animal-modal-close]");const k=l.querySelector("[data-take-home]"),b=document.querySelector("[data-animal-img]"),Q=document.querySelector("[data-animal-species]"),M=document.querySelector("[data-animal-name]"),Y=document.querySelector("[data-animal-age]"),Z=document.querySelector("[data-animal-sex]"),ee=document.querySelector("[data-animal-description]"),te=document.querySelector("[data-animal-health]"),oe=document.querySelector("[data-animal-behavior]");function ne(e){if(!l||!b||!M)return;const t=O.find(o=>o._id===e);t&&(b.src=t.image,b.alt=t.name,M.textContent=t.name,Y.textContent=t.age,Z.textContent=t.gender,Q.textContent=t.species,ee.textContent=t.shortDescription,te.textContent=t.healthStatus,oe.textContent=t.behavior,l.classList.remove("is-hidden"),document.body.style.overflow="hidden",re(t._id))}function A(){l.classList.add("is-hidden"),document.body.style.overflow=""}l.addEventListener("click",e=>{(e.target===l||e.target.closest("[data-animal-modal-close]"))&&A()});let v=null;function re(e){v=e}k&&k.addEventListener("click",()=>{if(!v)return;A();const e=new CustomEvent("openAdoptionModal",{detail:{animalId:v},bubbles:!0});document.dispatchEvent(e)});const I="https://paw-hut.b.goit.study/api";let g="",f=1,L=window.innerWidth>=1440?9:8;const E=document.querySelector(".pets-list"),F=document.querySelector(".filter-pet-list"),c=document.querySelector(".add-more-pets"),y=document.querySelector(".loader");window.addEventListener("resize",()=>{L=window.innerWidth>=1440?9:8});function se(){y&&y.classList.remove("hidden"),document.querySelectorAll(".filter-pet-list-button").forEach(e=>e.disabled=!0),c&&(c.disabled=!0)}function ae(){y&&y.classList.add("hidden"),document.querySelectorAll(".filter-pet-list-button").forEach(e=>e.disabled=!1),c&&(c.disabled=!1)}async function ie(){try{const t=await(await fetch(`${I}/categories`)).json(),o=`
            <li class="filter-item">
                <button type="button" class="filter-pet-list-button active" data-id="all">
                    –í—Å—ñ
                </button>
            </li>
        `,a=t.map(({_id:n,name:r})=>`
            <li class="filter-item">
            <button type="button" class="filter-pet-list-button" data-id="${n}">
                ${r}
            </button>
            </li>
        `).join("");F.innerHTML=o+a}catch(e){console.error("–°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞:",e.message)}}F.addEventListener("click",async e=>{e.target.nodeName==="BUTTON"&&(g=e.target.dataset.id,f=1,E.innerHTML="",document.querySelectorAll(".filter-pet-list-button").forEach(t=>t.classList.remove("active")),e.target.classList.add("active"),await q(g,f))});c.addEventListener("click",async()=>{f+=1,await q(g,f)});async function q(e="all",t=1){se();try{let o=`${I}/animals?page=${t}&limit=${L}`;e&&e!=="all"&&(o+=`&categoryId=${e}`);const a=await fetch(o);if(!a.ok)throw new Error("–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è");const n=await a.json();T(n.animals),t*L>=n.totalItems?c.classList.add("hidden"):c.classList.remove("hidden")}catch(o){console.error(o.message)}finally{ae()}}let O=[];function T(e=[]){O.push(...e);const t=e.map(o=>`
        <li class="pet-card">
            <img src="${o.image}" alt="${o.name}" />
            <div class="pet-info-box">
                <p class="pet-species">${o.species}</p>
                <h3 class="pet-name">${o.name}</h3>
                <ul class="pet-filters">
                    ${o.categories.map(a=>`<li>${a.name}</li>`).join("")}
                </ul>
                <ul class="pet-info">
                    <li>${o.age}</li>
                    <li>${o.gender}</li>
                </ul>
            </div>
            <p class="pet-desc">${o.shortDescription}</p>
    <button
                type="button"
                class="pet-more-btn"
                data-id="${o._id}">
                –î—ñ–∑–Ω–∞—Ç–∏—Å—å –±—ñ–ª—å—à–µ
            </button>
        </li>
    `).join("");E.insertAdjacentHTML("beforeend",t)}E.addEventListener("click",e=>{const t=e.target.closest(".pet-more-btn");if(!t)return;const o=t.dataset.id;ne(o)});const ce="https://paw-hut.b.goit.study/api/feedbacks?limit=10&page=1";function le(e){return`
        <div class="swiper-slide">
            <div class="feedback-card">
                <div>
                    <div class="rating-container">
                        <select class="star-rating-lib">
                            <option value="">Select a rating</option>
                            <option value="5" ${Math.round(e.rate)===5?"selected":""}>5</option>
                            <option value="4" ${Math.round(e.rate)===4?"selected":""}>4</option>
                            <option value="3" ${Math.round(e.rate)===3?"selected":""}>3</option>
                            <option value="2" ${Math.round(e.rate)===2?"selected":""}>2</option>
                            <option value="1" ${Math.round(e.rate)===1?"selected":""}>1</option>
                        </select>
                    </div>
                    <p class="feedback-text">${e.description}</p>
                </div>
                <p class="feedback-author">${e.author}</p>
            </div>
        </div>
    `}function de(e){const t=document.getElementById("feedbacks-wrapper");!t||!e||(t.innerHTML=e.map(le).join(""),setTimeout(()=>{new N(".star-rating-lib",{readOnly:!0,tooltip:!1,clearable:!1,stars:function(o,a,n){o.innerHTML=`
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
                <path d="M16 2.5l4.3 8.7 9.7 1.4-7 6.8 1.7 9.6-8.7-4.6-8.7 4.6 1.7-9.6-7-6.8 9.7-1.4z"/>
            </svg>`}}),ue()},0))}function ue(){return new S(".feedbacks-slider",{modules:[x,$],slidesPerView:1,spaceBetween:24,grabCursor:!0,breakpoints:{320:{slidesPerView:1,spaceBetween:16},768:{slidesPerView:2,spaceBetween:24},1280:{slidesPerView:2,spaceBetween:24}},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},observer:!0,observeParents:!0})}async function me(){if(document.querySelector(".feedbacks-section"))try{const a=(await(await fetch(ce)).json()).feedbacks;de(a)}catch(t){console.error("Error loading reviews:",t)}}R();me();document.addEventListener("DOMContentLoaded",()=>{P(),u(),K(),G(),ie(),q("all",1),fetch("https://paw-hut.b.goit.study/api/animals").then(t=>t.json()).then(t=>T(t.pets)).catch(t=>console.error(t))});"scrollRestoration"in history&&(history.scrollRestoration="manual");
//# sourceMappingURL=index.js.map
