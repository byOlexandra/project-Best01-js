import{A as _,S as l,a as q,N as $,P as B}from"./assets/vendor-DWbx0qBT.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();function R(){document.addEventListener("DOMContentLoaded",()=>{new _(".accordion-container",{duration:800,showMultiple:!1})})}const s={modal:document.querySelector("[data-modal]"),backdrop:document.querySelector("[data-modal-backdrop]"),closeBtn:document.querySelector("[data-modal-close]"),form:document.querySelector(".order-modal-form"),loader:document.querySelector(".loader")},X="https://paw-hut.b.goit.study/api";let y=null;const v=s.modal&&s.backdrop&&s.closeBtn&&s.form;v&&(s.closeBtn.addEventListener("click",m),s.backdrop.addEventListener("click",H),s.form.addEventListener("submit",J),s.form.addEventListener("input",G),s.form.addEventListener("blur",K,!0));document.addEventListener("openAdoptionModal",e=>{if(!v)return;const{animalId:t}=e.detail||{};M(t)});function M(e){v&&(y=e??null,s.modal.classList.remove("is-hidden"),document.body.classList.add("no-scroll"),window.addEventListener("keydown",A))}function m(){v&&(s.modal.classList.add("is-hidden"),document.body.classList.remove("no-scroll"),window.removeEventListener("keydown",A),y=null,U(),j())}function A(e){e.key==="Escape"&&m()}function H(e){e.target===s.backdrop&&m()}function V(e){const t=e.closest(".order-modal-field");if(!t)return null;let r=t.querySelector(".order-modal-error");return r||(r=document.createElement("p"),r.className="order-modal-error",r.style.marginTop="4px",r.style.fontSize="12px",r.style.lineHeight="1.3",r.style.color="#e74c3c",t.appendChild(r)),r}function f(e,t){e.classList.add("is-error");const r=V(e);r&&(r.textContent=t)}function I(e){e.classList.remove("is-error");const t=e.closest(".order-modal-field");if(!t)return;const r=t.querySelector(".order-modal-error");r&&(r.textContent="")}function U(){if(!s.form)return;s.form.querySelectorAll(".order-modal-input, .order-modal-textarea").forEach(I)}function d(e){if(!e)return!0;if(I(e),e.id==="user-comment"){const t=e.value.trim();return t.length>0&&t.length<10?(f(e,`–£ —Ç–µ–∫—Å—Ç—ñ –º–∞—î –±—É—Ç–∏ –Ω–µ –º–µ–Ω—à–µ 10 —Å–∏–º–≤–æ–ª—ñ–≤ (–≤–∏ –≤–≤–µ–ª–∏ ${t.length}).`),!1):!0}return e.checkValidity()?!0:e.id==="user-name"?(f(e,"–í–∫–∞–∂—ñ—Ç—å —ñ–º º—è."),!1):e.id==="user-phone"?(f(e,"–í–≤–µ–¥—ñ—Ç—å –Ω–æ–º–µ—Ä —É —Ñ–æ—Ä–º–∞—Ç—ñ 380XXXXXXXXX (12 —Ü–∏—Ñ—Ä)."),!1):(f(e,"–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤–≤–µ–¥–µ–Ω—ñ –¥–∞–Ω—ñ."),!1)}function z(){const e=s.form.querySelector("#user-name"),t=s.form.querySelector("#user-phone"),r=s.form.querySelector("#user-comment"),i=d(e),n=d(t),o=d(r);return i&&n&&o}function G(e){const t=e.target;(t.classList.contains("order-modal-input")||t.classList.contains("order-modal-textarea"))&&d(t)}function K(e){const t=e.target;(t.classList.contains("order-modal-input")||t.classList.contains("order-modal-textarea"))&&d(t)}function W(){s.loader&&s.loader.classList.remove("hidden")}function j(){s.loader&&s.loader.classList.add("hidden")}async function J(e){if(e.preventDefault(),!y){l.fire({icon:"warning",title:"–ù–µ –æ–±—Ä–∞–Ω–æ —Ç–≤–∞—Ä–∏–Ω—É",text:"–í—ñ–¥–∫—Ä–∏–π –¥–µ—Ç–∞–ª—ñ —Ç–≤–∞—Ä–∏–Ω–∏ —Ç–∞ –Ω–∞—Ç–∏—Å–Ω–∏ ¬´–í–∑—è—Ç–∏ –¥–æ–¥–æ–º—É¬ª."});return}if(!z()){const o=s.form.querySelector(".is-error");o&&o.focus();return}const r=new FormData(s.form),i={name:r.get("user-name").trim(),phone:r.get("user-phone").trim(),animalId:y,comment:(r.get("user-comment")||"").trim()},n=s.form.querySelector('button[type="submit"]');n&&(n.disabled=!0),W();try{const o=await fetch(`${X}/orders`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!o.ok){let a="–°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.";try{a=(await o.json()).message||a}catch{}throw new Error(a)}await l.fire({icon:"success",title:"–ó–∞—è–≤–∫—É –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ!",text:"–ú–∏ –∑–≤‚Äô—è–∂–µ–º–æ—Å—è –∑ –≤–∞–º–∏ –Ω–∞–π–±–ª–∏–∂—á–∏–º —á–∞—Å–æ–º üôÇ",timer:2200,showConfirmButton:!1}),s.form.reset(),m()}catch(o){l.fire({icon:"error",title:"–ù–µ –≤–¥–∞–ª–æ—Å—è –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ –∑–∞—è–≤–∫—É",text:o.message||"–ü–µ—Ä–µ–≤—ñ—Ä –∑‚Äô—î–¥–Ω–∞–Ω–Ω—è —Ç–∞ —Å–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑."})}finally{j(),n&&(n.disabled=!1)}}function Q(){const e=document.querySelector("[data-menu-open]"),t=document.querySelector("[data-menu-close]"),r=document.querySelector("[data-menu]"),i=document.querySelectorAll(".header-wrapper a");if(!e||!t||!r)return;const n=()=>{r.classList.add("is-open"),document.body.style.overflow="hidden"},o=()=>{r.classList.remove("is-open"),document.body.style.overflow=""};e.addEventListener("click",n),t.addEventListener("click",o),window.addEventListener("keydown",a=>{a.key==="Escape"&&r.classList.contains("is-open")&&o()}),i.forEach(a=>{a.addEventListener("click",o)}),r.addEventListener("click",a=>{a.target===r&&o()})}q.use([$,B]);function Y(){const e=document.querySelector(".swiper");if(!e)return;document.querySelector(".swiper-button-prev"),document.querySelector(".swiper-button-next");const t=new q(e,{slidesPerView:"auto",centeredSlides:!0,autoHeight:!1,loop:!1,speed:600,grabCursor:!0,allowTouchMove:!0,observer:!0,observeParents:!0,watchSlidesProgress:!0,updateOnImagesReady:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev",disabledClass:"swiper-button-disabled"},pagination:{el:".swiper-pagination",clickable:!0,dynamicBullets:!0,dynamicMainBullets:1},on:{init:function(){setTimeout(()=>{this.update()},300)}}});window.addEventListener("load",()=>{t.update()})}const u=document.querySelector("[data-animal-modal-backdrop]"),Z=document.querySelector(".modal");document.querySelector("[data-animal-modal-close]");const x=u.querySelector("[data-take-home]"),w=document.querySelector("[data-animal-img]"),ee=document.querySelector("[data-animal-species]"),C=document.querySelector("[data-animal-name]"),te=document.querySelector("[data-animal-age]"),re=document.querySelector("[data-animal-sex]"),oe=document.querySelector("[data-animal-description]"),ne=document.querySelector("[data-animal-health]"),se=document.querySelector("[data-animal-behavior]");function ie(e){if(!u||!w||!C)return;const t=O.find(r=>r._id===e);t&&(w.src=t.image,w.alt=t.name,C.textContent=t.name,te.textContent=t.age,re.textContent=t.gender,ee.textContent=t.species,oe.textContent=t.shortDescription,ne.textContent=t.healthStatus,se.textContent=t.behavior,u.classList.remove("is-hidden"),document.body.style.overflow="hidden",ae(t._id))}function h(){u.classList.add("is-hidden"),document.body.style.overflow=""}u.addEventListener("click",e=>{e.target.closest("[data-animal-modal-close]")&&h(),Z.contains(e.target)||h()});document.body.addEventListener("keydown",e=>{e.key==="Escape"&&h()});let L=null;function ae(e){L=e}x&&x.addEventListener("click",()=>{if(!L)return;h();const e=new CustomEvent("openAdoptionModal",{detail:{animalId:L},bubbles:!0});document.dispatchEvent(e)});const F="https://paw-hut.b.goit.study/api";let S="",g=1,E=window.innerWidth>=1440?9:8;const k=document.querySelector(".pets-list"),N=document.querySelector(".filter-pet-list"),c=document.querySelector(".add-more-pets"),b=document.querySelector(".loader");window.addEventListener("resize",()=>{E=window.innerWidth>=1440?9:8});function ce(){b&&b.classList.remove("hidden"),document.querySelectorAll(".filter-pet-list-button").forEach(e=>e.disabled=!0),c&&(c.disabled=!0)}function le(){b&&b.classList.add("hidden"),document.querySelectorAll(".filter-pet-list-button").forEach(e=>e.disabled=!1),c&&(c.disabled=!1)}async function de(){try{const t=await(await fetch(`${F}/categories`)).json(),r=`
            <li class="filter-item">
                <button type="button" class="filter-pet-list-button active" data-id="all">
                    –í—Å—ñ
                </button>
            </li>
        `,i=t.toSorted((n,o)=>n._id.localeCompare(o._id)).map(({_id:n,name:o})=>`
            <li class="filter-item">
            <button type="button" class="filter-pet-list-button" data-id="${n}">
                ${o}
            </button>
            </li>
        `).join("");N.innerHTML=r+i}catch{l.fire({icon:"error",title:"–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è",text:"–ù–µ –≤–¥–∞–ª–æ—Å—è –æ—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑ –ø—ñ–∑–Ω—ñ—à–µ."})}}N.addEventListener("click",async e=>{e.target.nodeName==="BUTTON"&&(S=e.target.dataset.id,g=1,k.innerHTML="",document.querySelectorAll(".filter-pet-list-button").forEach(t=>t.classList.remove("active")),e.target.classList.add("active"),await P(S,g))});c.addEventListener("click",async()=>{g+=1,await P(S,g)});async function P(e="all",t=1){ce();try{let r=`${F}/animals?page=${t}&limit=${E}`;e&&e!=="all"&&(r+=`&categoryId=${e}`);const i=await fetch(r);if(!i.ok)throw new Error("–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è");const n=await i.json();D(n.animals),t*E>=n.totalItems?c.classList.add("hidden"):c.classList.remove("hidden")}catch{l.fire({icon:"error",title:"–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è",text:"–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å–ø–∏—Å–æ–∫ —Ç–≤–∞—Ä–∏–Ω. –°–ø—Ä–æ–±—É–π—Ç–µ –ø—ñ–∑–Ω—ñ—à–µ."})}finally{le()}}let O=[];function D(e=[]){O.push(...e);const t=e.map(r=>`
        <li class="pet-card">
            <img src="${r.image}" alt="${r.name}" loading="lazy" />
            <div class="pet-info-box">
                <p class="pet-species">${r.species}</p>
                <h3 class="pet-name">${r.name}</h3>
                <ul class="pet-filters">
                    ${r.categories.map(i=>`<li>${i.name}</li>`).join("")}
                </ul>
                <ul class="pet-info">
                    <li>${r.age}</li>
                    <li>${r.gender}</li>
                </ul>
            </div>
            <p class="pet-desc">${r.shortDescription}</p>
    <button
                type="button"
                class="pet-more-btn"
                data-id="${r._id}">
                –î—ñ–∑–Ω–∞—Ç–∏—Å—å –±—ñ–ª—å—à–µ
            </button>
        </li>
    `).join("");k.insertAdjacentHTML("beforeend",t)}k.addEventListener("click",e=>{const t=e.target.closest(".pet-more-btn");if(!t)return;const r=t.dataset.id;ie(r)});const p="/project-Best01-js/assets/sprite-CKtRpGrr.svg",ue="https://paw-hut.b.goit.study/api/feedbacks?limit=10&page=1";function me(e){const t=e.rate;let r="";for(let i=1;i<=5;i++)i<=t?r+=`
            <svg class="star-icon filled">
            <use href="${p}#icon-star-filled"></use>
            </svg>`:i-.5<=t?r+=`
            <div class="star-half-wrapper">
            <svg class="star-icon outline">
                <use href="${p}#icon-star-outline"></use>
            </svg>
            <svg class="star-icon filled half-overlay">
                <use href="${p}#icon-star-filled"></use>
            </svg>
            </div>`:r+=`
            <svg class="star-icon outline">
            <use href="${p}#icon-star-outline"></use>
            </svg>`;return`
        <div class="swiper-slide">
        <div class="feedback-card">
            <div class="rating-container">
            <div class="stars-wrapper">${r}</div>
            </div>
            <p class="feedback-text">${e.description}</p>
            <p class="feedback-author">${e.author}</p>
        </div>
        </div>
    `}function fe(e){const t=document.getElementById("feedbacks-wrapper");!t||!(e!=null&&e.length)||(t.innerHTML=e.map(me).join(""),pe())}function pe(){const e=document.querySelector(".feedbacks-section .feedbacks-slider");if(!e)return;const t=e.querySelector(".swiper-button-next"),r=e.querySelector(".swiper-button-prev"),i=new q(e,{modules:[$,B],slidesPerView:1,slidesPerGroup:1,spaceBetween:24,grabCursor:!0,pagination:{el:e.querySelector(".swiper-pagination"),clickable:!0},breakpoints:{320:{slidesPerView:1,slidesPerGroup:1},768:{slidesPerView:2,slidesPerGroup:1},1280:{slidesPerView:2,slidesPerGroup:1}},on:{init:function(){n(this)},slideChange:function(){n(this)}}});function n(o){!t||!r||(r.disabled=o.isBeginning,r.classList.toggle("swiper-button-disabled",o.isBeginning),t.disabled=o.isEnd,t.classList.toggle("swiper-button-disabled",o.isEnd))}return t&&t.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation(),i.slideNext()}),r&&r.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation(),i.slidePrev()}),i}async function ye(){if(document.querySelector(".feedbacks-section"))try{const t=await fetch(ue),{feedbacks:r}=await t.json();fe(r)}catch{l.fire({icon:"error",title:"–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è",text:"–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤—ñ–¥–≥—É–∫–∏. –°–ø—Ä–æ–±—É–π—Ç–µ –ø—ñ–∑–Ω—ñ—à–µ."})}}R();ye();document.addEventListener("DOMContentLoaded",()=>{M(),m(),Q(),Y(),de(),P("all",1),fetch("https://paw-hut.b.goit.study/api/animals").then(t=>t.json()).then(t=>D(t.pets)).catch(t=>console.error(t))});"scrollRestoration"in history&&(history.scrollRestoration="manual");
//# sourceMappingURL=index.js.map
